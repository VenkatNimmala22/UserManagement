@model IEnumerable<UserManagementApp.Models.Log>

@{
    ViewData["Title"] = "Application Logs";
}

<div class="container mt-4">
    <h2><i class="fas fa-list-alt"></i> Application Logs</h2>

    <div class="row mb-3">
        <div class="col-md-6">
            <div class="btn-group" role="group">
                <a class="btn btn-outline-primary @(ViewBag.CurrentLogLevel == null ? "active" : "")"
                   asp-action="Index">All Logs</a>
                <a class="btn btn-outline-danger @(ViewBag.CurrentLogLevel == "Error" ? "active" : "")"
                   asp-action="Index" asp-route-logLevel="Error">Errors</a>
                <a class="btn btn-outline-warning @(ViewBag.CurrentLogLevel == "Warning" ? "active" : "")"
                   asp-action="Index" asp-route-logLevel="Warning">Warnings</a>
                <a class="btn btn-outline-info @(ViewBag.CurrentLogLevel == "Info" ? "active" : "")"
                   asp-action="Index" asp-route-logLevel="Info">Info</a>
            </div>
        </div>
        <div class="col-md-6 text-end">
            <a class="btn btn-danger" asp-action="Errors">
                <i class="fas fa-exclamation-triangle"></i> Error Report
            </a>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Time</th>
                    <th>Level</th>
                    <th>Message</th>
                    <th>File</th>
                    <th>Method</th>
                    <th>User</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var log in Model)
                {
                    var badgeClass = log.LogLevel switch
                    {
                        "Error" => "bg-danger",
                        "Warning" => "bg-warning text-dark",
                        "Info" => "bg-info",
                        "Debug" => "bg-secondary",
                        _ => "bg-primary"
                    };

                    <tr class="@(log.LogLevel == "Error" ? "table-danger" : "")">
                        <td>@log.CreatedAt.ToString("MM/dd HH:mm:ss")</td>
                        <td><span class="badge @badgeClass">@log.LogLevel</span></td>
                        <td title="@log.Message">
                            @(log.Message.Length > 100 ? log.Message.Substring(0, 100) + "..." : log.Message)
                        </td>
                        <td>@log.FileName</td>
                        <td>@log.MethodName</td>
                        <td>@log.UserName</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>